User: AGENTS.md dosyasÄ±nda bÃ¼yÃ¼k mimarisel kural deÄŸiÅŸiklikleri var. Bu deÄŸiÅŸiklikleri `order-service` ve `inventory-service`'e refactor ederek uygulayacaÄŸÄ±z. Bunun iÃ§in ÅŸu anda hiÃ§ bir deÄŸiÅŸiklik yapma. Bana sadece plan ver. AyrÄ±ca `Task Decomposition` yapacaÄŸÄ±z. Bunun iÃ§in task dosyalarÄ± oluÅŸtur. Burada `.ai/tasks/refactor_arch` klasÃ¶rÃ¼nÃ¼ kullanabilirsin (Task Decomposition iÃ§in). HiÃ§ bir kod oluÅŸturma. OluÅŸturabileceÄŸin tek ÅŸey task decomposition dosyalarÄ±.

GitHub Copilot: AGENTS.md'deki mimari kurallarÄ± ve mevcut servislerin yapÄ±sÄ±nÄ± analiz edeyim. 

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/inventory-service/src/main/java/com/ecommerce/inventoryservice/InventoryServiceApplication.java)

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/inventory-service/src/main/java/com/ecommerce/inventoryservice)

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/order-service/src/main/java/com/ecommerce/orderservice)

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/inventory-service/src/main/java/com/ecommerce/inventoryservice/service)

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/order-service/src/main/java/com/ecommerce/orderservice/service)

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/inventory-service/src/main/java/com/ecommerce/inventoryservice/repository)

Searched for files matching `**/*Service.java`, 2 matches

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/inventory-service/src/main/java/com/ecommerce/inventoryservice/controller/InventoryController.java#1-1), lines 1 to 80

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/inventory-service/src/main/java/com/ecommerce/inventoryservice/service/InventoryService.java#1-1), lines 1 to 50

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/inventory-service/src/main/java/com/ecommerce/inventoryservice/entity/InventoryItem.java#1-1), lines 1 to 50

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/order-service/src/main/java/com/ecommerce/orderservice/controller/OrderController.java#1-1), lines 1 to 100

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/order-service/src/main/java/com/ecommerce/orderservice/entity/Order.java#1-1), lines 1 to 50

Searched for regex `class.*ServiceImpl` (`**/*ServiceImpl.java`), 2 results

Åimdi mevcut yapÄ±nÄ±n detaylÄ± bir analizini yapÄ±p Task Decomposition planÄ±nÄ± oluÅŸturayÄ±m. 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch)

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/00-OVERVIEW.md)

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/01-INVENTORY-ANALYSIS.md)

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/02-INVENTORY-DOMAIN.md)

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/03-INVENTORY-APPLICATION.md)

Åimdi kalan task dosyalarÄ±nÄ± da oluÅŸturalÄ±m: 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/04-INVENTORY-INFRASTRUCTURE.md)

Devam ediyorum: 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/05-INVENTORY-WEB.md)

Åimdi order-service iÃ§in task dosyalarÄ±nÄ± oluÅŸturalÄ±m: 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/06-ORDER-ANALYSIS.md)

Son olarak final validation task dosyasÄ±nÄ± oluÅŸturayÄ±m: 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/11-VALIDATION.md)

Åimdi de order service iÃ§in kalan task dosyalarÄ±nÄ± toplu olarak oluÅŸturayÄ±m: 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/07-10-ORDER-IMPLEMENTATION.md)

Åimdi de bir Ã¶zet plan dosyasÄ± oluÅŸturayÄ±m: 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/README.md)

MÃ¼kemmel! Åimdi tÃ¼m task decomposition planÄ±nÄ± Ã¶zetleyen bir Ã¶zet rapor sunayÄ±m:

## ğŸ“‹ Hexagonal Architecture Refactoring - Plan Ã–zeti

TÃ¼m planlama dosyalarÄ±nÄ± oluÅŸturdum. HiÃ§bir kod deÄŸiÅŸikliÄŸi yapÄ±lmadÄ±, sadece task decomposition dosyalarÄ± hazÄ±rlandÄ±.

### ğŸ“ OluÅŸturulan Dosyalar

```
.ai/tasks/refactor_arch/
â”œâ”€â”€ README.md                      # Genel yÃ¼rÃ¼tme planÄ± ve referans
â”œâ”€â”€ 00-OVERVIEW.md                 # Proje genel bakÄ±ÅŸÄ±
â”œâ”€â”€ 01-INVENTORY-ANALYSIS.md       # Inventory service analizi
â”œâ”€â”€ 02-INVENTORY-DOMAIN.md         # Domain layer detaylarÄ±
â”œâ”€â”€ 03-INVENTORY-APPLICATION.md    # Application layer detaylarÄ±
â”œâ”€â”€ 04-INVENTORY-INFRASTRUCTURE.md # Infrastructure refactoring
â”œâ”€â”€ 05-INVENTORY-WEB.md           # Web layer gÃ¼ncellemeleri
â”œâ”€â”€ 06-ORDER-ANALYSIS.md          # Order service analizi
â”œâ”€â”€ 07-10-ORDER-IMPLEMENTATION.md # Order service tÃ¼m fazlar
â””â”€â”€ 11-VALIDATION.md              # Final validation checklist
```

---

## ğŸ¯ Temel Bulgular ve Plan

### Mevcut Mimari Sorunlar

Her iki serviste tespit edilen **kritik AGENTS.md ihlalleri:**

1. **âŒ Hexagonal Architecture YOK**
   - Application layer eksik
   - Domain layer eksik  
   - Port/Adapter pattern uygulanmamÄ±ÅŸ

2. **âŒ Entity = Domain Model = Persistence Model**
   - Business logic JPA entity'lerde
   - Framework baÄŸÄ±mlÄ±lÄ±ÄŸÄ± domain'de

3. **âŒ Veri Tipi Ä°hlalleri**
   - `LocalDateTime` kullanÄ±mÄ± (â†’ `Instant` olmalÄ±)
   - Money iÃ§in `double/float` riski (â†’ `BigDecimal` olmalÄ±)
   - Time: AGENTS.md Line 151-153
   - Money: AGENTS.md Line 148-150

4. **âŒ Business Logic DaÄŸÄ±nÄ±k**
   - Service implementation'da business rules
   - Entity'lerde domain logic
   - Unit test edilemiyor (Spring gerekli)

---

## ğŸ—ï¸ Hedef Mimari

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WEB LAYER (controller + DTOs)          â”‚
â”‚  - Input validation                     â”‚
â”‚  - DTO mapping                          â”‚
â”‚  - NO business logic                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APPLICATION LAYER (use-cases)          â”‚
â”‚  - Orchestration                        â”‚
â”‚  - Transaction management               â”‚
â”‚  - UNIT TESTABLE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DOMAIN LAYER (business rules)          â”‚
â”‚  - Pure business logic                  â”‚
â”‚  - NO framework dependencies            â”‚
â”‚  - Domain services                      â”‚
â”‚  - Repository ports (interfaces)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INFRASTRUCTURE LAYER (adapters)        â”‚
â”‚  - JPA entities (persistence)           â”‚
â”‚  - Repository adapters                  â”‚
â”‚  - Mappers (domain â†” entity)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Ä°ÅŸ Tahmini

| Faz | Servis | SÃ¼re | Dosya SayÄ±sÄ± | SatÄ±r Tahmini |
|-----|--------|------|--------------|---------------|
| Analiz | Inventory | 2h | - | - |
| Domain | Inventory | 4h | 9 | 470 |
| Application | Inventory | 5h | 9 | 395 |
| Infrastructure | Inventory | 6h | 9 | 425 |
| Web | Inventory | 3h | 4 | 280 |
| **Toplam Inventory** | | **20h** | **31** | **~1570** |
| | | | | |
| Analiz | Order | 2h | - | - |
| Domain | Order | 5h | 11 | 600 |
| Application | Order | 5h | 8 | 400 |
| Infrastructure | Order | 4h | 9 | 500 |
| Web | Order | 2h | 4 | 300 |
| **Toplam Order** | | **18h** | **32** | **~1800** |
| | | | | |
| **Final Validation** | | **4h** | - | - |
| | | | | |
| **GENEL TOPLAM** | | **42h** | **63+** | **~3370** |

---

## ğŸ”‘ Kritik DeÄŸiÅŸiklikler

### 1. Inventory Service

**Domain Models (Yeni):**
- `domain.model.InventoryItem` (pure business logic)
- `domain.model.Reservation`
- `domain.model.ReservationItem` (value object)
- `domain.service.StockService`
- `domain.service.ReservationService`

**Use-Cases (Yeni):**
- `GetInventoryItemUseCase`
- `CheckAvailabilityUseCase`
- `CreateReservationUseCase`
- `GetReservationUseCase`
- `ConfirmReservationUseCase`
- `CancelReservationUseCase`

**Infrastructure (Refactor):**
- `InventoryItemEntity` (JPA only, NO business logic)
- `ReservationEntity` (JPA only)
- `InventoryRepositoryAdapter` (implements domain port)
- `InventoryItemMapper` (domain â†” entity)

---

### 2. Order Service

**Domain Models (Yeni):**
- `domain.model.Order` (aggregate root)
- `domain.model.OrderItem` (value object)
- `domain.model.Money` (value object - `BigDecimal` wrapper)
- `domain.model.DeliveryAddress` (value object)
- `domain.service.OrderPricingService`
- `domain.service.OrderValidationService`

**Use-Cases (Yeni):**
- `CreateOrderUseCase`
- `GetOrderUseCase`
- `CancelOrderUseCase`
- `UpdateOrderStatusUseCase`

**Ã–nemli:** Order service'te **Money** handling kritik - tÃ¼m para deÄŸerleri `BigDecimal` olmalÄ±.

---

## âš ï¸ Kritik Kurallar

### Dependency Direction (MANDATORY)
```
Domain â†’ HIÃ‡BIR ÅEY'E baÄŸÄ±mlÄ± deÄŸil
Application â†’ SADECE Domain'e baÄŸÄ±mlÄ±
Infrastructure â†’ Domain + Application'a baÄŸÄ±mlÄ±
Web â†’ Application'a baÄŸÄ±mlÄ±
```

### Data Types (MANDATORY)
- **Money:** `BigDecimal` ONLY (NO double/float)
- **Time:** `Instant` ONLY (NO LocalDateTime)
- **IDs:** `UUID` ONLY (already correct âœ…)

### Business Logic Location
- **Domain:** TÃœM business rules
- **Application:** Orchestration + transaction
- **Infrastructure:** Persistence ONLY
- **Web:** Validation + mapping ONLY

---

## ğŸš€ Ã–nerilen YaklaÅŸÄ±m

### AÅŸama 1: Inventory Service (1 hafta)
1. Task 01: Analiz (2 saat)
2. Task 02: Domain oluÅŸtur (4 saat)
3. Task 03: Application oluÅŸtur (5 saat)
4. Task 04: Infrastructure refactor (6 saat)
5. Task 05: Web gÃ¼ncelle (3 saat)
6. **Checkpoint:** Test et, deploy et, Ã¶ÄŸren

### AÅŸama 2: Order Service (1 hafta)
7. Task 06-10: Inventory pattern'ini takip et
8. Money handling'e Ã¶zel dikkat
9. **Checkpoint:** Test et, deploy et

### AÅŸama 3: Final Validation (1 gÃ¼n)
10. Task 11: Comprehensive validation
11. AGENTS.md compliance check
12. Performance validation

**Toplam:** 2-3 hafta (1 developer iÃ§in)

---

## ğŸ“ Sonraki AdÄ±mlar

### Hemen Åimdi
1. âœ… PlanÄ± oku ve anla ([README.md](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/README.md))
2. âœ… Task 01'i detaylÄ± incele ([01-INVENTORY-ANALYSIS.md](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/01-INVENTORY-ANALYSIS.md))
3. â“ Sorular varsa sor (AGENTS.md kurallarÄ± net mi?)
4. ğŸš¦ Onay al (baÅŸlamadan Ã¶nce)

### Kodlamaya BaÅŸlamadan Ã–nce
1. Git branch oluÅŸtur (`feature/hexagonal-architecture`)
2. Backup al (gÃ¼venlik iÃ§in)
3. Task dosyasÄ±nÄ± aÃ§, adÄ±m adÄ±m takip et
4. **HÄ°Ã‡BÄ°R ÅEYÄ° uydurmadan** kod yaz

---

## â“ SÄ±kÃ§a Sorulan Sorular

**S: Hepsini birden mi yapmalÄ±yÄ±m?**  
C: HayÄ±r. Ã–nce inventory service'i bitir, test et. Sonra order service.

**S: Test yazacak mÄ±yÄ±m?**  
C: Evet, Ã¶zellikle domain testleri. HÄ±zlÄ± ve deÄŸerli.

**S: API deÄŸiÅŸecek mi?**  
C: HAYIR. Sadece internal refactoring. API contracts aynÄ± kalmalÄ±.

**S: Åu anda kod yazabilir miyim?**  
C: **HAYIR**. Ã–nce planÄ± onaylaman ve Task 01'den baÅŸlaman gerekiyor.

---

## âœ… Plan HazÄ±r

TÃ¼m task dosyalarÄ± refactor_arch klasÃ¶rÃ¼nde hazÄ±r. HiÃ§bir kod deÄŸiÅŸikliÄŸi yapÄ±lmadÄ±. 

**Bir sonraki adÄ±m:** PlanÄ± incele, sorularÄ± sor, onay al, Task 01'den baÅŸla. ğŸš€

Made changes.

User: PlanÄ± bir developer deÄŸil bir AI Agent execute edecek. Buradaki yapÄ±larÄ± buna gÃ¶re dÃ¼zenle. 

GitHub Copilot: AI Agent execution iÃ§in tÃ¼m task dosyalarÄ±nÄ± gÃ¼ncelleyeceÄŸim. Ä°nsan approval sÃ¼reÃ§lerini, "soru sor" direktiflerini ve manuel review noktalarÄ±nÄ± AI-friendly yaklaÅŸÄ±mlara Ã§evireceÄŸim. 

Using "Multi-Replace String in Files"


```

```


Using "Multi-Replace String in Files"


```

```


Using "Multi-Replace String in Files"


```

```


Using "Multi-Replace String in Files"


```

```

```

```

```

```

```

```

```

```


Using "Multi-Replace String in Files"


```

```
Åimdi README.md'ye AI Agent iÃ§in Ã¶zel bir execution guide ekleyeyim: 

Using "Replace String in File"


```

```
Son olarak 07-10-ORDER-IMPLEMENTATION.md dosyasÄ±nÄ± da gÃ¼ncelleyeyim: 

Using "Replace String in File"


```

```
Åimdi final bir AI Agent execution guide'Ä± oluÅŸturayÄ±m: 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/AI-AGENT-GUIDE.md)

MÃ¼kemmel! Åimdi tÃ¼m deÄŸiÅŸiklikleri Ã¶zetleyen bir rapor sunayÄ±m:

## âœ… AI Agent Execution Ä°Ã§in Plan GÃ¼ncellendi

TÃ¼m task decomposition dosyalarÄ± **AI Agent autonomous execution** iÃ§in yeniden yapÄ±landÄ±rÄ±ldÄ±. HiÃ§bir kod deÄŸiÅŸikliÄŸi yapÄ±lmadÄ±.

---

## ğŸ“‹ YapÄ±lan DeÄŸiÅŸiklikler

### ğŸ”„ Genel DÃ¶nÃ¼ÅŸÃ¼mler

| Ã–nceki YaklaÅŸÄ±m | Yeni YaklaÅŸÄ±m (AI Agent) |
|-----------------|-------------------------|
| "Soru sor" | "KararÄ± otomatik ver" |
| "Onay bekle" | "Otomatik devam et" |
| "Manuel review" | "Automated validation" |
| "Team discussion" | "Pattern-based decision" |
| "Pending approval" | "Ready for execution" |
| "Ask if uncertain" | "Analyze and decide autonomously" |

---

## ğŸ“ GÃ¼ncellenen Dosyalar

### 1. **README.md** âœ…
**DeÄŸiÅŸiklikler:**
- Execution strategy â†’ AI Agent sequential execution
- Daily checklist â†’ AI Agent execution checklist
- FAQ â†’ AI Agent decision rules
- Support section â†’ Error handling protocol
- "Get approval" â†’ "Execute autonomously"

**Yeni Ekleme:**
- ğŸ¤– AI Agent Execution Overview
- Autonomous mode directives
- Self-correcting protocol

---

### 2. **00-OVERVIEW.md** âœ…
**DeÄŸiÅŸiklikler:**
- Execution guidelines â†’ AI Agent operation mode
- "Plan first, then code" â†’ "Analyze thoroughly, then generate"
- "User approval" â†’ "Autonomous execution"
- Next steps â†’ Automated task progression

**Yeni Ekleme:**
- AI Agent decision framework
- Pattern recognition mode
- Self-correcting behavior

---

### 3. **01-INVENTORY-ANALYSIS.md** âœ…
**DeÄŸiÅŸiklikler:**
- "Questions to Resolve (MUST ASK)" â†’ "AI Agent Decision Rules (AUTO-RESOLVE)"
- Her soru iÃ§in otomatik Ã§Ã¶zÃ¼m stratejisi
- "Pending review" â†’ "Ready for AI Agent execution"

**Karar KurallarÄ±:**
1. Money type â†’ Analyze entities, auto-decide
2. Optimistic locking â†’ Dual approach (domain + JPA)
3. Transaction boundaries â†’ Application layer only
4. Testing strategy â†’ Generate during refactoring

---

### 4. **02-05: Inventory Tasks** âœ…
**DeÄŸiÅŸiklikler:**
- TÃ¼m statusler "AI Agent: Execute after Task N" formatÄ±na Ã§evrildi
- Manuel checkpoint'ler automated validation'a Ã§evrildi
- Her task baÄŸÄ±msÄ±z execution unit olarak yapÄ±landÄ±rÄ±ldÄ±

---

### 5. **06-ORDER-ANALYSIS.md** âœ…
**DeÄŸiÅŸiklikler:**
- "Questions to Resolve" â†’ "AI Agent Decision Rules (AUTO-RESOLVE)"
- Currency, Order Total, Status Transitions â†’ Otomatik karar kurallarÄ±
- External service integration â†’ Pattern-based wrapping

---

### 6. **11-VALIDATION.md** âœ…
**DeÄŸiÅŸiklikler:**
- "Sign-Off" (manuel) â†’ "Automated Validation" (otomatik)
- Manuel testing â†’ Automated test suites
- Human review â†’ Optional post-execution review
- Success criteria â†’ Fully automated checks

**Validation KomutlarÄ±:**
```bash
./mvnw clean compile          # Compilation check
./mvnw test -Dtest="**/domain/**/*Test"  # Unit tests
./mvnw verify                 # Integration tests
grep -r "LocalDateTime" .../domain/  # Static analysis
```

---

### 7. **AI-AGENT-GUIDE.md** âœ… (YENÄ°)
**Tam AI Agent execution protokolÃ¼:**
- 5 core directives
- Task-by-task detailed instructions
- Decision framework with examples
- Self-correction protocol
- Progress tracking format
- Success criteria checklist

---

## ğŸ¤– AI Agent Operation Protocol

### Core Directives

1. **ANALYZE BEFORE GENERATE**
   - Codebase'i tara
   - AGENTS.md ihlallerini tespit et
   - Pattern'leri Ã¶ÄŸren

2. **DECIDE AUTONOMOUSLY**
   - AGENTS.md = absolute rules
   - Existing patterns = guidance
   - Simplest solution = default choice

3. **GENERATE SYSTEMATICALLY**
   - File breakdown'Ä± takip et
   - Complete implementations (no TODOs)
   - Consistent conventions

4. **VALIDATE CONTINUOUSLY**
   - Her dosyadan sonra compile
   - Test'leri incremental Ã§alÄ±ÅŸtÄ±r
   - Validation fail â†’ rollback

5. **PROCEED SEQUENTIALLY**
   - Task N complete â†’ Task N+1
   - Inventory = template for Order
   - Log all decisions

---

## ğŸ“Š Execution Flow

```
START
  â†“
Task 01: Analyze inventory-service
  â†’ Scan codebase
  â†’ Identify violations
  â†’ Document gap analysis
  âœ“ Validation: All violations mapped
  â†“
Task 02: Generate domain layer
  â†’ Create 9 domain files (~470 lines)
  â†’ NO Spring, use Instant, UUID
  âœ“ Validation: Compiles without Spring, tests pass
  â†“
Task 03: Generate application layer
  â†’ Create 6 use-cases + config
  âœ“ Validation: Orchestration only, no business logic
  â†“
Task 04: Refactor infrastructure
  â†’ Transform entities, create adapters
  âœ“ Validation: Mappers work, adapters implement ports
  â†“
Task 05: Update web layer
  â†’ Update controller, DTOs
  âœ“ Validation: Integration tests pass, API unchanged
  â†“
Task 06-10: Repeat for order-service
  â†’ Apply learned patterns
  â†’ Add Money handling
  âœ“ Validation: Same checks as inventory
  â†“
Task 11: Final validation
  â†’ Run all automated checks
  âœ“ Success: All checks pass
  â†“
Generate Summary Report
  â†“
END
```

---

## ğŸ¯ Key AI Agent Behaviors

### Decision Making
```
IF specification unclear:
  â†’ Analyze existing code patterns
  â†’ Apply AGENTS.md rules
  â†’ Choose simplest compliant solution
  â†’ Log decision rationale

IF multiple valid approaches:
  â†’ Evaluate against simplicity rule (AGENTS.md 4.1)
  â†’ Select most maintainable
  â†’ Document choice

IF data missing:
  â†’ Extract from codebase
  â†’ NEVER invent
  â†’ Use defaults only if AGENTS.md specifies
```

### Error Handling
```
IF validation fails:
  â†’ Identify failed check
  â†’ Analyze root cause
  â†’ Rollback affected files
  â†’ Re-analyze requirement
  â†’ Regenerate with fix
  â†’ Re-validate
  LOOP until pass OR max retries
```

### Pattern Application
```
Inventory Service (Tasks 01-05):
  â†’ Establish patterns
  â†’ Document decisions
  
Order Service (Tasks 06-10):
  â†’ Replicate patterns exactly
  â†’ Apply order-specific business logic
  â†’ Maintain architectural consistency
```

---

## âœ… Ã‡Ä±ktÄ± Ã–zeti

### OluÅŸturulan/GÃ¼ncellenen Dosyalar
- **README.md** - AI Agent execution overview
- **AI-AGENT-GUIDE.md** - DetaylÄ± execution protocol (YENÄ°)
- **00-OVERVIEW.md** - Autonomous operation mode
- **01-INVENTORY-ANALYSIS.md** - Auto-resolve decision rules
- **02-05-INVENTORY-*.md** - Sequential execution ready
- **06-ORDER-ANALYSIS.md** - Auto-resolve decision rules
- **07-10-ORDER-IMPLEMENTATION.md** - Pattern replication guide
- **11-VALIDATION.md** - Automated validation checks

### Toplam DeÄŸiÅŸiklik
- **9 dosya** gÃ¼ncellendi
- **1 yeni dosya** eklendi (AI-AGENT-GUIDE.md)
- **0 kod** deÄŸiÅŸtirildi

---

## ğŸš€ AI Agent NasÄ±l BaÅŸlayacak?

### BaÅŸlangÄ±Ã§ Komutu
```
EXECUTE: Hexagonal Architecture Refactoring
MODE: Autonomous
STARTING_TASK: 01-INVENTORY-ANALYSIS.md
VALIDATION: Continuous
HUMAN_INTERVENTION: None (unless critical failure)
```

### Ä°lk AdÄ±mlar
1. **Load:** [AI-AGENT-GUIDE.md](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/AI-AGENT-GUIDE.md)
2. **Parse:** [01-INVENTORY-ANALYSIS.md](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/.ai/tasks/refactor_arch/01-INVENTORY-ANALYSIS.md)
3. **Scan:** inventory-service codebase
4. **Analyze:** AGENTS.md violations
5. **Proceed:** Task 02 â†’ 03 â†’ ... â†’ 11

---

## ğŸ“ Son Notlar

**AI Agent Ä°Ã§in HazÄ±r:** âœ…  
**Manuel Approval Gerektiren AdÄ±m:** âŒ (HiÃ§biri)  
**Execution Mode:** Fully Autonomous  
**Human Review:** Optional (post-execution)  

AI Agent artÄ±k baÅŸlayabilir. TÃ¼m task dosyalarÄ± autonomous execution iÃ§in optimize edildi. ğŸ¤–ğŸš€

Made changes.

User: Bu task execution policy'i takip ederek, adÄ±m adÄ±m her adÄ±mdan sonra (TASK) review ve onay bekleyen ve "next" dediÄŸimde sonraki taska geÃ§en bir session baÅŸlatacaÄŸÄ±m. Bunun iÃ§in projedeki default prompt kalÄ±bÄ±mÄ±zÄ± kullanarak bana prompt ver.

GitHub Copilot: Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/docs/prompt)

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/docs/prompt/standard.md)

Read [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/docs/prompt/implement-inventory-service.md#1-1), lines 1 to 150

Perfect! Åimdi R-C-T-C-O-E formatÄ±nda, task decomposition execution iÃ§in bir prompt oluÅŸturacaÄŸÄ±m: 

Created [](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/docs/prompt/refactor-hexagonal-architecture.md)

MÃ¼kemmel! Prompt hazÄ±r. Ä°ÅŸte projenizin R-C-T-C-O-E formatÄ±na uygun, step-by-step execution prompt'u:

---

## ğŸ“‹ Prompt OluÅŸturuldu

**Dosya:** [docs/prompt/refactor-hexagonal-architecture.md](file:///c%3A/Users/PC1/Desktop/Projects/Education/Java/turkcell-ai-2/docs/prompt/refactor-hexagonal-architecture.md)

---

## ğŸ¯ Prompt Ã–zellikleri

### âœ… R-C-T-C-O-E FormatÄ±
- **ROLE:** Senior Software Architect - Hexagonal Architecture uzmanÄ±
- **CONTEXT:** Neden refactoring yapÄ±yoruz (AGENTS.md compliance)
- **TASK:** Net execution protocol (7 adÄ±mlÄ±)
- **CONSTRAINTS:** Ne yapÄ±lmayacak (invention, skipping, etc.)
- **OUTPUT:** Her task iÃ§in detaylÄ± output formatÄ±
- **EXAMPLES:** Session flow Ã¶rnekleri

### âœ… Step-by-Step Kontrol
- Her task iÃ§in **FILE BREAKDOWN** Ã¶nce gÃ¶sterilir
- **"next"** komutu bekler
- Sonra implementation yapÄ±lÄ±r
- Validation report verilir
- Tekrar **"next"** komutu bekler

### âœ… Komut Sistemi
```
start/begin   â†’ Task 01'i baÅŸlat
next          â†’ Devam et / Sonraki task'a geÃ§
explain [X]   â†’ Bir kararÄ± aÃ§Ä±kla
show [file]   â†’ Dosya iÃ§eriÄŸini gÃ¶ster
rollback      â†’ Geri al
status        â†’ Durum raporu
```

---

## ğŸš€ NasÄ±l KullanÄ±lÄ±r?

### 1. Yeni Chat Session BaÅŸlat

Yeni bir chat'te bu prompt'u yapÄ±ÅŸtÄ±r:

```
[Prompt iÃ§eriÄŸini kopyala/yapÄ±ÅŸtÄ±r]
```

### 2. Session BaÅŸlat

```
start
```

### 3. Her AdÄ±mda Review Yap

AI ÅŸunu verecek:
```
ğŸ“‹ TASK 01: Analysis
ğŸ” Identified Violations: [liste]
ğŸ“¦ FILE BREAKDOWN: [detaylÄ± plan]

â¸ï¸ WAITING FOR YOUR "next" COMMAND
```

**Sen kontrol et**, sonra:
```
next
```

### 4. Implementation SonrasÄ± Review

AI implementation yapacak ve validation report verecek:
```
âœ… VALIDATION RESULTS
ğŸ“Š TASK COMPLETE

â¸ï¸ AWAITING YOUR "next" COMMAND
```

**SonuÃ§larÄ± kontrol et**, sonra:
```
next  â†’ Task 02'ye geÃ§
```

### 5. Devam Et

11 task tamamlanana kadar tekrarla.

---

## ğŸ“Š Prompt'un GÃ¼Ã§lÃ¼ YanlarÄ±

1. **KontrollÃ¼ Ä°lerleme:** Her adÄ±mda review ÅŸansÄ±
2. **Åeffaf Planlama:** FILE BREAKDOWN Ã¶nce gÃ¶sterilir
3. **Validation:** Her task sonrasÄ± otomatik kontrol
4. **Rollback:** HatalÄ± task'Ä± geri alabilme
5. **Komut Sistemi:** Net kontrol komutlarÄ±
6. **AGENTS.md Uyumlu:** TÃ¼m kurallar prompt'ta
7. **Output Format:** Consistent, okunabilir Ã§Ä±ktÄ±lar

---

## ğŸ’¡ KullanÄ±m Ä°puÃ§larÄ±

### Ä°yi Pratikler
- Her FILE BREAKDOWN'Ä± dikkatlice oku
- Validation results'Ä± kontrol et
- AnlamadÄ±ÄŸÄ±n bir ÅŸeyi `explain` ile sor
- ÅÃ¼pheli bir dosyayÄ± `show [file]` ile incele

### Komut Ã–rnekleri
```bash
start                           # BaÅŸla
next                           # Devam
explain Money value object     # AÃ§Ä±klama iste
show domain/model/Order.java   # Dosya gÃ¶ster
status                         # Neredeyiz?
rollback                       # Geri al
```

---

## ğŸ¬ HazÄ±rsÄ±n!

Prompt dosyasÄ±: refactor-hexagonal-architecture.md

**Yeni bir chat session'da bu prompt'u kullanarak "start" dediÄŸinde refactoring baÅŸlayacak!** ğŸš€

Her task'ta review yapÄ±p "next" diyerek ilerleyeceksin.

Made changes.